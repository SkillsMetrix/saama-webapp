

const mongoose= require('mongoose')
const connectDB= async() =>{
    try{
        console.log('getting connected');
        
        await mongoose.connect("mongodb+srv://saama:saama@cluster0.rle5i.mongodb.net/saamadb?retryWrites=true&w=majority&appName=Cluster0")
        //await mongoose.connect("mongodb://localhost:27017/saamadb")

        console.log('connected to DB');
        
    }catch(err){}
}
module.exports=connectDB;


-----------

const mongoose = require("mongoose");

const UserSchema = new mongoose.Schema({
  username: { type: String, required: true },
  password: { type: String, required: true },
});
module.exports = mongoose.model("User", UserSchema);


-------

const express= require('express')
const bcrypt= require('bcryptjs')
const jwt= require('jsonwebtoken')
const User= require('../models/User')

const router= express.Router()
router.post('/register',async(req,res)=>{
     
    
    const {username,password}= req.body
    console.log(username);
    console.log(password);
    const hashed= await bcrypt.hash(password,10)
    console.log(hashed);

    try{
        console.log('getting stored');
        const newUser= await User.create({username,password: hashed})
        console.log(newUser);
        
        res.status(201).json({message:'User Registered',data:newUser})
    }catch(err){
        res.status(400).json({error:'User Already exists'})
        
    }
})

module.exports=router



-------


var express= require('express')
const connectDB = require("./config/db");

const authRoutes= require('./routes/auth')
const app=express()


app.use(express.json())

connectDB();
app.use('/api/auth',authRoutes)

app.listen(3200,()=>{
    console.log('server is ready...!');
    
})



